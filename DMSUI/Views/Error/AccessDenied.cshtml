@{
    ViewData["Title"] = "Bir Sorun Oluştu";
    var statusCode = ViewBag.StatusCode as int?;
}

<div class="container d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="card shadow-sm border-0" style="max-width: 520px; width: 100%;">
        <div class="card-body text-center p-4">

            <div class="mb-3">
                <span class="display-4 text-warning">⚠️</span>
            </div>

            <h4 class="mb-2">
                @(statusCode == 403 ? "Erişim izniniz yok" : "Bir hata oluştu")
            </h4>

            <p class="text-muted mb-4">
                @(statusCode == 403
                                ? "Bu sayfayı görüntülemek için gerekli yetkilere sahip değilsiniz."
                                : "İşlem sırasında beklenmeyen bir hata meydana geldi.")
            </p>

            @if (statusCode != null)
            {
                <div class="badge bg-light text-dark mb-3">
                    HTTP @statusCode
                </div>
            }

            @if (ViewBag.ErrorMessage != null && statusCode != 403)
            {
                <div class="alert alert-danger small">
                    @ViewBag.ErrorMessage
                </div>
            }

            @if (ViewBag.StackTrace != null &&
                        Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") == "Development")
            {
                <details class="text-start mt-3">
                    <summary class="text-muted small">Detayları göster</summary>
                    <pre class="small mt-2">@ViewBag.StackTrace</pre>
                </details>
            }

            <div class="d-flex justify-content-center gap-2 mt-4">
                <a asp-controller="Dashboard" asp-action="Index" class="btn btn-primary">
                    Anasayfa
                </a>

                @if (statusCode == 403)
                {
                    <a asp-controller="Auth" asp-action="Login" class="btn btn-outline-secondary">
                        Giriş Yap
                    </a>
                }
            </div>

        </div>
    </div>
</div>
